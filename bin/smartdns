#!/usr/bin/env node
var path = require('path');
var fs = require('fs');
var lib = path.join(path.dirname(fs.realpathSync(__filename)), '../');
var server = require(lib + '/server');

if(!process.argv[2]) {
    server.startup();
} else if(process.argv[2] == '--help' || process.argv[2] == '-h') {
    console.log('SmartDNS 0.1.4');
    console.log('smartdns -c "/path/to/config/file"');
    console.log('If the listening port is smaller than 1000, you might use "sudo" before it.');
} else if(process.argv[2] == '--config' || process.argv[2] == '-c') {
    var config = require(process.argv[3]);
    server.startup(config);
} else {
    console.log('Please use "--help" or "-h" to show manual.');
}